{
  "hash": "8604691917c37e10b0dcf9bce0c572ae",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"How to make a deck of cards in R\"\nauthor: \"Ben R Woodard\"\ndate: '2021-01-24'\ncategories: R\nimage: \"deckofcards.png\"\ntags: [\"fun with r\", \"example\"]\nauthors: [\"benrwoodard\"]\n---\nJust for the fun of it, I wanted to see how to create a complete deck of playing cards in the least amount of steps possible.  Obviously, I could have just imported a premade dataset based on scraping a webpage or a csv file that someone created already but what fun would that be? **So here we go!**\n\n\n**Goal:**\nWe need to create a deck of cards that includes 4 different suits of 13 different values, and 13 different faces.\n\n1. Make the suits in order by naming the four suits and listing them 13 times so that all 3 lists are the same length.\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsuits <- c('spades', 'clubs', 'diamonds', 'hearts')\n\nsuit <- unlist(map(suits, rep, 13))\n\nhead(suit)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"spades\" \"spades\" \"spades\" \"spades\" \"spades\" \"spades\"\n```\n\n\n:::\n:::\n\n\n2. Make the faces by listing out all 13 and we can duplicate it from there.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfaces <- c('king', 'queen', 'jack', 'ten', 'nine', 'eight', 'seven', 'six', 'five', 'four', 'three', 'two', 'ace')\nface <- rep(faces, 4)\n\nhead(face)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"king\"  \"queen\" \"jack\"  \"ten\"   \"nine\"  \"eight\"\n```\n\n\n:::\n:::\n\n\n3. Make the values of the cards by listing out the values and then duplicating that 4xs\n\n\n::: {.cell}\n\n```{.r .cell-code}\nvalue <- rep(13:1, 4)\n\nhead(value)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 13 12 11 10  9  8\n```\n\n\n:::\n:::\n\n\n4.  Make the deck by combining the 3 different lists.\n\n::: {.cell}\n\n```{.r .cell-code}\ndeck <- data.frame(face, suit, value)\n\nhead(deck)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n   face   suit value\n1  king spades    13\n2 queen spades    12\n3  jack spades    11\n4   ten spades    10\n5  nine spades     9\n6 eight spades     8\n```\n\n\n:::\n\n```{.r .cell-code}\ntail(deck)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n    face   suit value\n47   six hearts     6\n48  five hearts     5\n49  four hearts     4\n50 three hearts     3\n51   two hearts     2\n52   ace hearts     1\n```\n\n\n:::\n\n```{.r .cell-code}\ndeck %>%\n  group_by(suit) %>%\n  summarise(cards = n(),\n            totalValue = sum(value))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 4 Ã— 3\n  suit     cards totalValue\n  <chr>    <int>      <int>\n1 clubs       13         91\n2 diamonds    13         91\n3 hearts      13         91\n4 spades      13         91\n```\n\n\n:::\n:::\n\n## Now we need to create the deal function\n\nThe following is a simple deal function that will deal out 7 random cards (rows) from the deck and not replace those cards back into the deck during the random sample process.\n\n::: {.cell}\n\n```{.r .cell-code}\ndeal <- function(x) {\n  sample_n(deck, x, replace = F)\n}\n\ndeal(7)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n   face     suit value\n1   ten   spades    10\n2 queen   spades    12\n3   ten diamonds    10\n4   six diamonds     6\n5 three   spades     3\n6 queen    clubs    12\n7   six   hearts     6\n```\n\n\n:::\n:::\n\n\n## Let's play a game of blackjack\n\nNow that we have the deck compiled we can start playing a game.  Blackjack will be a great place to start since it is fairly straight forward.  The biggest problem we are going to have is dealing cards from a single deck without having it reshuffle using another function call.  The remaining items in the deck must be saved as the new deck.\n\nThere is a simple solution to keeping the cards that were drawn from being pulled again. The 'anti_join()' function can help us with that. \n\nWe will need to remove the items from the dealers hand and save it as a list item. Then we need to deal out the 2 cards for the player. If the user wants another card then he will need to ask for a new card while supplying the dealer hand along with the user hand.  It is important that these rows are not included in the deck when asked.\n\nLet's edit the deal function to return all 3 elements if needed.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndeal <- function(x, set = NULL){\n  hand <- set$myhand\n  dealerhand <- set$dealerhand\n  myhand = list()\n  #remove the existing hand from the deck if it is included\n  if(!is.null(hand)) {\n    deck <- deck %>% anti_join(hand)\n  }\n  #remove the existing dealer's hand from the deck if it is included\n  if(!is.null(dealerhand)) {\n    deck <- deck %>% anti_join(dealerhand)\n  }\n  #if there is not dealer hand included then we need to get him 2 cards\n  if(is.null(dealerhand)) {\n    dealerhand <- sample_n(deck, 2, replace = F)\n    #once this is done we need to remove those 2 cards from the deck\n    deck <- deck %>% anti_join(dealerhand)\n  }\n  #the new cards need to be drawn from the deck\n  newhand <- sample_n(deck, x, replace = F)\n  #if the hand is not null then \n  if(!is.null(hand)) {\n          myhand <- rbind(hand, newhand) \n        } else {\n          myhand <- newhand\n          }\n  hand <- list(myhand = myhand, dealerhand = dealerhand)\n  return(hand)\n  \n}\n\n#Deal the cards and get your set\nset <- deal(2)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nJoining with `by = join_by(face, suit, value)`\n```\n\n\n:::\n\n```{.r .cell-code}\nset$myhand\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n   face   suit value\n1 seven hearts     7\n2  five  clubs     5\n```\n\n\n:::\n\n```{.r .cell-code}\nset$dealerhand\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  face  suit value\n1  six clubs     6\n2 king clubs    13\n```\n\n\n:::\n\n```{.r .cell-code}\n#play on if you feel lucky!\nset <- deal(1, set)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nJoining with `by = join_by(face, suit, value)`\nJoining with `by = join_by(face, suit, value)`\n```\n\n\n:::\n\n```{.r .cell-code}\nstr(set)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nList of 2\n $ myhand    :'data.frame':\t3 obs. of  3 variables:\n  ..$ face : chr [1:3] \"seven\" \"five\" \"queen\"\n  ..$ suit : chr [1:3] \"hearts\" \"clubs\" \"diamonds\"\n  ..$ value: int [1:3] 7 5 12\n $ dealerhand:'data.frame':\t2 obs. of  3 variables:\n  ..$ face : chr [1:2] \"six\" \"king\"\n  ..$ suit : chr [1:2] \"clubs\" \"clubs\"\n  ..$ value: int [1:2] 6 13\n```\n\n\n:::\n:::\n\n\nNow we have the dealers hand and the players hand. This is just a start but a fun exercise for me and my 11 year old son, Garrett. \n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}